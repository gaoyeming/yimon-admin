"use strict";(self["webpackChunkyimon_vue"]=self["webpackChunkyimon_vue"]||[]).push([[362],{5362:function(e,l,o){o.r(l),o.d(l,{default:function(){return d}});var a=o(6768);const i={class:"login"},t={class:"login-bg"},s={class:"login-form"},n={class:"input-right-icon"};function r(e,l,r,g,c,p){const d=(0,a.g2)("el-image"),u=(0,a.g2)("el-divider"),h=(0,a.g2)("el-input"),m=(0,a.g2)("User"),w=(0,a.g2)("el-icon"),b=(0,a.g2)("el-form-item"),F=(0,a.g2)("el-button"),_=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",t,[(0,a.bF)(d,{style:{width:"300px",height:"300px"},src:o(5549)},null,8,["src"])]),(0,a.bF)(u,{direction:"vertical"}),(0,a.Lk)("div",s,[(0,a.bF)(_,{"label-position":"right",rules:c.loginRules,"label-width":"80px",model:c.loginForm,ref:"loginRef"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:"用户名",prop:"loginName"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:c.loginForm.loginName,"onUpdate:modelValue":l[0]||(l[0]=e=>c.loginForm.loginName=e),placeholder:"请输入用户名"},null,8,["modelValue"]),(0,a.Lk)("span",n,[(0,a.bF)(w,null,{default:(0,a.k6)((()=>[(0,a.bF)(m)])),_:1})])])),_:1}),(0,a.bF)(b,{label:"密码",prop:"loginPassword"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{type:c.loginPassword_input_type,modelValue:c.loginForm.loginPassword,"onUpdate:modelValue":l[1]||(l[1]=e=>c.loginForm.loginPassword=e),placeholder:"请输入密码"},null,8,["type","modelValue"]),(0,a.Lk)("span",{class:"input-right-icon",onClick:l[2]||(l[2]=(...e)=>p.showLoginPassword&&p.showLoginPassword(...e))},[((0,a.uX)(),(0,a.Wv)((0,a.$y)(c.loginPassword_input_icon),{style:{width:"1em"}}))])])),_:1}),(0,a.bF)(b,{label:"验证码",prop:"captcha"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:c.loginForm.captcha,"onUpdate:modelValue":l[3]||(l[3]=e=>c.loginForm.captcha=e),style:{width:"150px",float:"left"},maxlength:"6",placeholder:"请输入验证码"},null,8,["modelValue"]),(0,a.bF)(d,{src:c.captchaImg,onClick:l[4]||(l[4]=e=>p.getCaptchaImg()),style:{width:"120px",float:"right"}},null,8,["src"])])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,{type:"primary",onClick:l[5]||(l[5]=e=>p.login("loginRef"))},{default:(0,a.k6)((()=>[(0,a.eW)("登录")])),_:1}),(0,a.bF)(F,{onClick:l[6]||(l[6]=l=>e.$resetForm("loginRef"))},{default:(0,a.k6)((()=>[(0,a.eW)("重置")])),_:1})])),_:1})])),_:1},8,["rules","model"])])])}var g={name:"LoginView",data(){return{loginForm:{loginName:"admin",loginPassword:"123456",captchaType:"",captchaKey:"",captcha:""},loginRules:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"}],loginPassword:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:1,max:5,message:"验证码为1~5个字符",trigger:"blur"}]},captchaImg:"",loginPassword_input_type:"password",loginPassword_input_icon:"Hide"}},created(){this.getCaptchaImg()},methods:{getCaptchaImg(){this.loginForm.captchaType="login",this.loginForm.captchaKey=this.$commonUtils.getUuid();const e={captchaType:this.loginForm.captchaType,captchaKey:this.loginForm.captchaKey};this.$axios.post("/verify/captcha/create",e).then((e=>{null!=e["captchaImg"]&&(this.captchaImg="data:image/png;base64,"+e["captchaImg"])}))},showLoginPassword(){"password"===this.loginPassword_input_type?(this.loginPassword_input_icon="View",this.loginPassword_input_type=""):(this.loginPassword_input_icon="Hide",this.loginPassword_input_type="password")},login(e){this.$refs[e].validate((e=>{e&&this.$axios.post("/user/login",this.loginForm).then((e=>{this.$message.success({message:e.loginName+"【登录成功】",duration:3e3})})).finally((()=>{this.getCaptchaImg()}))}))}}},c=o(1241);const p=(0,c.A)(g,[["render",r]]);var d=p}}]);